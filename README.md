# Проект 
Реализован связке `React`, `Redux`, `Laravel`. В проекте реализовано редактирование справочников по маршрутам `CRUD`

## Что реализовано мною
- Исправлены ошибки авторизации
- Добавлена загрузка файлов в справочники
- Добавлен справочник `currencies` с полным `CRUD`
- Добавлено описание проекта в ходе своих исследований

## Описание проекта
1. В проекте присутствует Докер, который  состоит из `docker-compose` и `docker`. Имеется дамп
`.docker/db/dump.sql`, который запускается докером в ходе создания образов по команде `docker-compose up -d`.

2. Команды в директории `app/console/Commands` предназначены для автоматизации процессов миграции, первичной заливке данных, 
автоматической установки токенов паспортов для  OAuth 2.0 сервера авторизации. Токены заливаются в БД из таблицы `oauth_clients` при восстановлении
докером дампа БД скриптом `.docker/db/dump.sql`.
Команда `PassportConfigure` предназначена  для автоматической конфигурации паспортов для  OAuth 2.0 сервера авторизации.

3. Данный проект не относится к проектам с широким применением IoC-сервисов. Для реализации бекенда тут использованы стандартные 
контроллеры, модели, классы реквестов. Примечательно описание маршрутов, когда добавлена дополнителная папка `routes/api`
для реализации принципов единственной ответственности кода.

4. В проекте реализованы тесты для проверки функционала работы с объектами. Нехватает тестов для проверки Api по запросам.

5. Frontend реализован на `React`, `Redux`. В проекте присутствуют модули авторизации, нескольких CRUD справочников. 
- Что общего для всех модулей проекта в папке `js/modules`, чтобы можно было легко разобраться:
    - У каждого маршрута присутствует файл `index.js`, который является контейнером. Он создает контейнер `Page.js` c  привязкой
к хранилищу коллбеком `mapStateToProps`. Далее в этом маршруте имеется папка `components` в котором лежит компоент `Form.js`,
отвечающий за отображение.
    - В каждом модуле имеется папка `store`, в котором имеются типы экшенов `action-types.js`, экшены `actions.js`, редуктор `reducer.js`.
    Они нужны чтобы реализовать паттерн `Flax`. Каждый раз когда происходят изменения хранилища через диспетчер `dispatcher`
    они происходят с указанием экшена из `actions.js` с типами `action-types.js`. Редукторы в файле `reducer.js` осуществляют
    прослушку событий экшенов своего типа и при возникновении экшена срабатывают через диспетчер `dispatcher`. Диспетчер
    необходим для достижения асинхронности.
    - В каждом модуле присутствует папка `service.js`, в которой хранятся функции для обращения к API, т.е. обновления, добавления,
    удаления, чтения всех объектов. Данные функции после своей работы активируют экшены из `actions.js` с передачей данных.
- В проекте реакта имеется папка `js/routes` всего проекта, которая предназначена для генерации списка маршрутов на входной точке-скрипте `app.js`.
    - Файл `index.js` тут является входной точкой в генерации маршрутов. Он берет все маршруты из  `routes.js`,
    проходится по ним циклом и в зависимости от того, приватный маршрут или публичный добавляет контейнеры `Private.js`,
    `Public.js`. В файле `routes.js` происходит сборка всех маршрутов из остальных модулей.
- В папке `js/store` происходит загрузка хранилища `redux` всего проекта. Она также вызывается из входной точки `app.js`. Входным скриптом
папки является файл `index.js`. Имеется файл `reducer.js`, который комбинирует, объединяет все редукторы с одноименным именем `reducer.js` 
из реализованных модулей. Для настройки редукторов для всего проекта применяется файл `config.js`, в котором по сути происходят все 
модули-расширения для `redux` и вся настройка `redux`.
- В папке `utils` находится функционал для работы с запросами `Http`, трансформации объектов, а также  класс для всех сущностей-моделей.
В файле `Model.js` имеется класс `Model`, который используется для конвертаций и созхдается каждый раз когда сущности загружаются с
API или создаются в коде.
- В папке `values` хранятся данные, общие для проекта. 


## Разворачивание
Убедитесь, что  [docker](https://docs.docker.com/install/) и [docker-compose](https://docs.docker.com/compose/install/) установлены на вашей машине.

1. `git clone`
2. `create a .env file copy content from .env.docker and do not make any change`

запустите следующую команду в терминале
```
docker-compose up -d
```

когда докер построит все контейнеры, запустите контейнер laravel-react-app, используя следущую команду
`docker exec -it laravel_react_app sh`

теперь ты будешь внутри контейнера

выполните команды
1. `composer install && composer update`
2. `php artisan cron:refresh-database`
3. `php artisan key:gen`
4. `npm install && npm run dev`

откройте браузер и наберите

`http://localhost:3000`

